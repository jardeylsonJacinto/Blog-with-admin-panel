<%- include("../../partials/header.ejs") %>
  <%- include("../../partials/navbar.ejs") %>

    <div class="container">
      <hr>
      <h2>Categorias</h2>
      <a class="btn btn-success" href="/admin/categories/new">Criar nova categoria</a>
      <hr>

      <table class="table table-dark table-striped">
        <thead>
          <tr>
            <th scope="col">Id</th>
            <th scope="col">Título</th>
            <th scope="col">Slug</th>
            <th scope="col">Ações</th>
          </tr>
        </thead>
        <tbody>
          <% categories.forEach( category=> { %>
            <tr>
              <td>
                <%= category.id %>
              </td>
              <td>
                <%= category.title %>
              </td>
              <td>
                <%= category.slug %>
              </td>
              <td>
                <form method="POST" action="/categories/delete" style="display: inline;">
                  <input type="hidden" name="id" value="<%= category.id %>">
                  <button class="btn btn-outline-warning"><ion-icon size="small"
                      name="create-outline"></ion-icon>Editar</button>
                </form>

                <form method="POST" action="/categories/delete" style="display: inline;" onsubmit="confirDelete(event, this)">
                  <input type="hidden" name="id" value="<%= category.id %>">
                  <button class="btn btn-outline-danger"><ion-icon size="small"
                      name="trash-outline"></ion-icon>Deletar</button>
                </form>
              </td>
            </tr>
            <% }) %>
        </tbody>
      </table>
    </div>
<script>
  function confirDelete(event, form) {
    event.preventDefault();
    let decision = confirm("Você deseja deletar essa categoria?");
    if (decision) {
      form.submit();
    }
  }
</script>
    <%- include("../../partials/footer.ejs") %>